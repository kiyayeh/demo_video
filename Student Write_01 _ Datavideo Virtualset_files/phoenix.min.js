(function($){"use strict";var plugin='phoenix',defaultOptions={selector:{message:'.message-wrap'}},PhoenixCore=function($form,options){options=$.extend(true,{},defaultOptions,options);this.form=$form;this.options=options};PhoenixCore.prototype={submit:function(url,queries,method,customMethod){var form=this.form,methodInput=form.find('input[name="_method"]');if(!methodInput.length){methodInput=$('<input name="_method" type="hidden">');form.append(methodInput)};methodInput.val(customMethod);if(queries){var input;$.each(queries,function(key,value){input=form.find('input[name="'+key+'"]');if(!input.length){input=$('<input name="'+key+'" type="hidden">');form.append(input)};input.val(value)})};if(url)form.attr('action',url);if(method)form.attr('method',method);form.submit();return true},get:function(url,queries,customMethod){return this.submit(url,queries,'GET',customMethod)},post:function(url,queries,customMethod){return this.submit(url,queries,'POST',customMethod)},put:function(url,queries){return this.post(url,queries,'PUT')},patch:function(url,queries){return this.post(url,queries,'PATCH')},sendDelete:function(url,queries){return this.post(url,queries,'DELETE')},addMessage:function(msg,type){var messageContainer=$(this.options.selector.message);Phoenix.Theme.renderMessage(messageContainer,msg,type);return this},removeMessages:function(){var messageContainer=$(this.options.selector.message);Phoenix.Theme.removeMessages(messageContainer);return this},keepAlive:function(url,time){window.setInterval(function(){var r;try{r=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject('Microsoft.XMLHTTP')}catch(e){};if(r){r.open('GET',url,true);r.send(null)}},time)}};$.fn[plugin]=function(options){if(!this.data('phoenix.'+plugin))this.data('phoenix.'+plugin,new PhoenixCore(this,options));return this.data('phoenix.'+plugin)}})(jQuery)